<!DOCTYPE html>
<html lang="en" data-accent-color="indigo" data-content_root="../../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>The 2021 Python Language Summit: Making CPython Faster - Python Blog</title><link rel="shortcut icon" href="../../_static/badge.svg"/><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../../_static/shibuya.css?v=301e5329" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=87e54e7c" />
    <link media="print" rel="stylesheet" type="text/css" href="../../_static/print.css?v=20ff2c19" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    



</head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="/">
      <img class="light-logo" src="../../_static/badge.svg" alt="Python Blog" height="28" loading="lazy" />
      <img class="dark-logo" src="../../_static/badge.svg" alt="Python Blog" height="28" loading="lazy" />
      <strong>Python Blog</strong>
    </a>
    <div class="sy-head-nav" id="HeadNav">
      <nav class="sy-head-links"><ul><li class="link"><a href="../../index.html">Home</a></li>
      <li class="link"><button type="button">
            <span>Community</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul><li><a href="https://www.python.org/dev/">
                <span>Contributing</span>
                <small>Learn how to contribute to the Python project</small>
              </a></li><li><a href="https://policies.python.org/python.org/code-of-conduct/">
                <span>Code of Conduct</span>
                <small>Review the etiquette for interacting with the Python community</small>
              </a></li><li><a href="https://www.python.org/dev/security/">
                <span>Security</span>
                <small>Overview of PSFs's security protocols</small>
              </a></li></ul>
      </li>
      <li class="link"><button type="button">
            <span>About</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul><li><a href="https://www.python.org/psf-landing/">
                <span>Python Software Foundation</span>
                <small>Details about the PSF</small>
              </a></li><li><a href="https://www.python.org/downloads/">
                <span>Releases</span>
                <small>Explore the latest Python releases</small>
              </a></li></ul>
      </li>
      <li class="link"><button type="button">
            <span>Help</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul><li><a href="https://discord.gg/python">
                <span>Discord Help Forum</span>
                <small>Dedicated Discord help forum</small>
              </a></li><li><a href="https://discuss.python.org/">
                <span>Board Discussions</span>
                <small>Board Discussions</small>
              </a></li></ul>
      </li><li class="link">
          <a href="https://github.com/sponsors/python">
            <span>Sponsor</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="sy-head-socials"></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="HeadNav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div><div class="sy-container mx-auto body">
    <main class="sy-content mx-auto pt-12 px-6 xl:px-12 break-words">
      <article class="yue" role="main">
        
<section id="the-2021-python-language-summit-making-cpython-faster">
<h1>The 2021 Python Language Summit: Making CPython Faster<a class="headerlink" href="#the-2021-python-language-summit-making-cpython-faster" title="Link to this heading">¶</a></h1>
<p><em>This was originally posted on blogger</em> <a class="reference external" href="https://pyfound.blogspot.com/2021/05/the-2021-python-language-summit-making.html">here</a>.</p>
<p>At the <a class="reference external" href="https://pyfound.blogspot.com/2021/05/the-2021-python-language-summit.html">2021 Python Language
Summit</a>, <a class="reference external" href="https://twitter.com/gvanrossum">Guido van Rossum</a> gave a
presentation about plans for making CPython faster. This presentation came
right after <a class="reference external" href="https://pyfound.blogspot.com/2021/05/the-2021-python-language-summit-cpython.html">Dino Viehland’s talk about Instagram’s performance improvements
to CPython</a> and made multiple references to it.</p>
<p><a class="reference external" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXUICqNBposvfIqu63rjCOvn1nm8zmAS98pvVK0phoV2cEdms1YEjSVFOkd-ZdkPR2jTXSgfa8HX2aJcSrueSc7Fu9rYCsahz6rMK8aAFtHzj_RmywwhkTpyKok7LQlPOJ7vg/s16000/guido.png">![Guido van
Rossum</a>
](<a class="reference external" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXUICqNBposvfIqu63rjCOvn1nm8zmAS98pvVK0phoV2cEdms1YEjSVFOkd">https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXUICqNBposvfIqu63rjCOvn1nm8zmAS98pvVK0phoV2cEdms1YEjSVFOkd</a>-
ZdkPR2jTXSgfa8HX2aJcSrueSc7Fu9rYCsahz6rMK8aAFtHzj_RmywwhkTpyKok7LQlPOJ7vg/s500/guido.png)</p>
<section id="can-we-make-cpython-faster">
<h2>Can We Make CPython Faster?<a class="headerlink" href="#can-we-make-cpython-faster" title="Link to this heading">¶</a></h2>
<p>We can, but it’s not yet clear by how much. Last October, <a class="reference external" href="https://github.com/markshannon">Mark
Shannon</a> shared a plan on
<a class="reference external" href="http://github.com/markshannon/faster-cpython">GitHub</a> and python-dev. He
asked for feedback and said that he could make CPython five times faster in
four years, or fifty percent faster per year for four years in a row. He was
looking for funding and wouldn’t reveal the details of his plan without it.</p>
</section>
<section id="how-will-we-make-cpython-faster">
<h2>How Will We Make CPython Faster?<a class="headerlink" href="#how-will-we-make-cpython-faster" title="Link to this heading">¶</a></h2>
<p>Seven months ago, Guido van Rossum left a brief retirement to work at
Microsoft. He was given the freedom to pick a project and decided to work on
making CPython faster. Microsoft will be funding a small team consisting of
Guido van Rossum, Mark Shannon, Eric Snow, and possibly others.</p>
<p>The team will:</p>
<blockquote>
<div><ul class="simple">
<li><p>Collaborate fully and openly with CPython’s core developers</p></li>
<li><p>Make incremental changes to CPython</p></li>
<li><p>Take care of maintenance and support</p></li>
<li><p>Keep all project-specific repos open</p></li>
<li><p>Have all discussions in trackers on open GitHub repos</p></li>
</ul>
</div></blockquote>
<p>The team will need to work within some constraints. They’ll need to keep code
maintainable, not break stable ABI compatibility, not break limited API
compatibility, and not break or slow down extreme cases, such as pushing a
million cases on the eval stack. Although they won’t be able to change the
data model, they will be able to change:</p>
<blockquote>
<div><ul class="simple">
<li><p>The byte code</p></li>
<li><p>The compiler</p></li>
<li><p>The internals of a lot of objects</p></li>
</ul>
</div></blockquote>
<p>The team is optimistic about doubling CPython’s speed for 3.11. They plan to
try an adaptive, specializing byte code interpreter, which is a bit like the
existing inline cache and a bit like the shadow byte code covered in <a class="reference external" href="https://pyfound.blogspot.com/2021/05/the-2021-python-language-summit-cpython.html">Dino
Viehland’s talk</a>. Mark Shannon shared a sketch of an
implementation of an adaptive specializing interpreter in <a class="reference external" href="https://www.python.org/dev/peps/pep-0659/">PEP
659</a>.</p>
<p>If the team grows, then they’ll have more room to try other optimizations.
They could improve startup time, change the pyc file format, change the
internals of integers, put __dict__ at a fixed offset, use hidden classes, and
possibly use tagged integers.</p>
<p>The team plans to keep working on speeding up CPython after Python 3.11, but
they’ll need to be creative in order to achieve a 5x improvement. It will
involve machine-generated code. They may also need to evolve the stable ABI.</p>
</section>
<section id="who-will-benefit">
<h2>Who Will Benefit?<a class="headerlink" href="#who-will-benefit" title="Link to this heading">¶</a></h2>
<p>You’ll benefit from the speed increase if you:</p>
<blockquote>
<div><ul class="simple">
<li><p>Run CPU-intensive pure Python code</p></li>
<li><p>Use tools or websites built in CPython</p></li>
</ul>
</div></blockquote>
<p>You might not benefit from the speed increase if you:</p>
<blockquote>
<div><ul class="simple">
<li><p>Rewrote your code in C, Cython, C++, or similar to increase speed already (e.g. NumPy, TensorFlow)</p></li>
<li><p>Have code that is mostly waiting for I/O</p></li>
<li><p>Use multithreading</p></li>
<li><p>Need to make your code more algorithmically efficient first</p></li>
</ul>
</div></blockquote>
</section>
<section id="where-can-you-learn-more">
<h2>Where Can You Learn More?<a class="headerlink" href="#where-can-you-learn-more" title="Link to this heading">¶</a></h2>
<p>To learn more, you can check out the following repos:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="http://github.com/faster-cpython/cpython">Fork of CPython for staging branches</a></p></li>
<li><p><a class="reference external" href="http://github.com/faster-cpython/ideas">Tracker for discussions</a></p></li>
<li><p><a class="reference external" href="http://github.com/faster-cpython/tools">Tools for analysis, benchmarking, and more</a></p></li>
</ul>
</div></blockquote>
<p>You can also read through <a class="reference external" href="https://www.python.org/dev/peps/pep-0659/">PEP 659 — Specializing Adaptive
Interpreter</a>.</p>
</section>
</section>

<div class="section ablog__blog_comments">
  
  


<div class="section ablog__prev-next">
  <span class="ablog__prev">
    
    
    Previous:
    
    <a href="2021-05-the-2021-python-language-summit-cpython.html">
      
      <span>The 2021 Python Language Summit: CPython Performance Improvements at Instagram</span>
    </a>
    
  </span>
  <span class="ablog__spacer">&nbsp;</span>
  <span class="ablog__next">
    
    
    Next:
    
    <a href="2021-05-the-2021-python-language-summit-hpy.html">
      <span>The 2021 Python Language Summit: HPy — Present and Future</span>
      
    </a>
    
  </span>
</div>

  
  
</div>

      </article>
      
    </main>
  </div><footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2024, Python Software Foundation</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials"></div>
    </div>
  </div>
</footer>
      <script src="../../_static/documentation_options.js?v=8a448e45"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../../_static/shibuya.js?v=3cc430e2"></script></body>
</html>